---
---

@import "minimal-mistakes";

/* =========================================================
   JARDIN DES SIMPLES — main.scss (ENTIER)
   Minimal Mistakes + peau claire + navigation iPhone propre
   ========================================================= */

/* ---------- Fonts ---------- */
@import url("https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;600&family=JetBrains+Mono:wght@400;600&display=swap");

/* ---------- Palette ---------- */
:root{
  --paper: #f3efe6;
  --paper2:#fbf8f2;
  --ink:   #171717;
  --muted: #5b5b5b;

  --rule:  rgba(0,0,0,.14);
  --shadow: rgba(0,0,0,.10);

  --toxic: #1d7a50;
  --blood: #8b1d1d;

  /* hauteur “réelle” de la barre sur mobile */
  --masthead-h: 56px;
}


@media (max-width: 63.9375em){
  /* Sur iPhone : on utilise le menu du haut (main:) -> pas de sidebar */
  .sidebar,
  .sidebar__right,
  .sidebar__left{
    display: none !important;
  }
}
/* =========================================================
   TYPO / PAGE
   ========================================================= */
body{
  background: var(--paper);
  color: var(--ink);
}

.page__content{
  font-family: "EB Garamond", ui-serif, Georgia, serif;
  font-size: 1.12rem;
  line-height: 1.75;
}

h1,h2,h3,h4{
  font-family: "JetBrains Mono", ui-monospace, Menlo, monospace;
  letter-spacing: .2px;
  color: var(--ink);
}

a{ color: var(--toxic); }
a:hover{ color: #0f5e3a; }

hr{
  border:0;
  border-top:1px solid var(--rule);
  margin:2rem 0;
}

blockquote{
  border-left:3px solid var(--blood);
  padding-left:1rem;
  color: var(--muted);
}

.page__inner-wrap, .page__content{
  max-width: 980px;
}

/* titres façon “rapport” */
h2{
  border-bottom: 1px solid var(--rule);
  padding-bottom: .35rem;
  margin-top: 2.3rem;
}

/* images */
.page__content img{
  display:block;
  margin:1.2rem auto;
  max-width: 860px;
  width:100%;
  border-radius:14px;
  border:1px solid var(--rule);
  box-shadow: 0 10px 25px var(--shadow);
}

/* code */
pre{
  background:#fff;
  border:1px solid var(--rule);
  border-radius:12px;
  padding:1rem;
  box-shadow:0 8px 18px var(--shadow);
}

/* =========================================================
   HEADER / MASTHEAD
   ========================================================= */
.masthead{
  background: rgba(243,239,230,.92);
  border-bottom: 1px solid var(--rule);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* desktop: sticky */
@media (min-width: 64em){
  .masthead{
    position: sticky;
    top: 0;
    z-index: 9999;
  }
}

/* =========================================================
   TABLES
   - desktop: pas de débordement (wrap)
   - mobile: scroll horizontal
   ========================================================= */

/* desktop / général : wrap + table-layout fixed */
.page__content table{
  width:100% !important;
  max-width:100% !important;
  border-collapse: collapse;
  margin: 1.6rem 0;
  background: var(--paper2);
  border: 1px solid var(--rule);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 18px var(--shadow);
  table-layout: fixed; /* empêche “trop grand sur Mac” */
}

.page__content th,
.page__content td{
  padding: 10px 12px;
  vertical-align: top;
  white-space: normal !important;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.page__content th{
  background: rgba(0,0,0,.06);
  color: var(--ink);
  text-align: left;
  border-bottom: 1px solid var(--rule);
  font-family: "JetBrains Mono", ui-monospace, Menlo, monospace;
  font-size: .85rem;
  text-transform: uppercase;
  letter-spacing: .2px;
}

.page__content td{
  border-bottom: 1px solid rgba(0,0,0,.08);
}

.page__content tr:hover{
  background: rgba(29,122,80,.06);
}

/* mobile: scroll horizontal (et 1ère colonne sticky optionnelle) */
@media (max-width: 768px){
  .page__content table{
    display:block;
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
    white-space: nowrap;
    table-layout: auto; /* sur mobile on laisse le contenu décider */
  }
  .page__content th,
  .page__content td{
    white-space: nowrap !important;
    overflow-wrap: normal;
    word-break: normal;
  }
  .page__content table th:first-child,
  .page__content table td:first-child{
    position: sticky;
    left: 0;
    background: var(--paper2);
    box-shadow: 6px 0 12px rgba(0,0,0,.08);
  }
}

/* =========================================================
   SIDEBAR NAV (DESKTOP)
   - vraie colonne gauche, pas “carte”
   ========================================================= */
.sidebar{
  background: transparent;
  border: 0;
  box-shadow: none;
  padding: 0;
}

/* liens */
.sidebar a{
  color: var(--ink);
  text-decoration: none;
  border-left: 2px solid transparent;
  padding-left: .55rem;
  display:block;
  line-height: 1.25;
}
.sidebar a:hover{
  color: var(--toxic);
  border-left-color: var(--toxic);
}

/* sur desktop : on enlève le titre “Toggle Menu”, on garde juste la liste */
@media (min-width: 64em){
  .sidebar nav{
    border-left: 1px solid var(--rule);
    padding-left: 1rem;
    margin-top: .5rem;
  }
  .sidebar .nav__title{
    display:none !important;
  }
}

/* =========================================================
   iPHONE / MOBILE NAV FIXED (propre)
   Objectif :
   - barre fixée
   - titre à gauche
   - Toggle Menu à droite DANS la barre
   - menu déroulant plein-largeur sous la barre
   ========================================================= */

/* 1) barre fixée en mobile */
@media (max-width: 63.9375em){
  .masthead{
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 99999 !important;
  }

  /* réserve l'espace sous la barre */
  body{
    padding-top: calc(env(safe-area-inset-top, 0px) + var(--masthead-h)) !important;
  }

  /* barre plus fine */
  .masthead__inner-wrap{
    padding: .55rem .85rem !important;
  }

  /* laisse la place à droite pour le bouton */
  .greedy-nav a.site-title{
    padding-right: 110px !important;
    margin: 0 !important;
  }

  /* 2) IMPORTANT : FORCER le label visible (sinon il “disparaît”) */
  .nav__list label{
    display: inline-flex !important; /* clé du bug */
    align-items: center;
    justify-content: center;

    position: fixed !important;
    top: calc(env(safe-area-inset-top, 0px) + 8px) !important;
    right: 10px !important;
    left: auto !important;
    z-index: 100000 !important;

    padding: .30rem .55rem !important;
    border-radius: 10px !important;
    border: 1px solid rgba(0,0,0,.12) !important;
    background: rgba(251,248,242,.82) !important;
    box-shadow: 0 6px 14px rgba(0,0,0,.08) !important;

    font-family: "JetBrains Mono", ui-monospace, Menlo, monospace !important;
    font-size: .82rem !important;
    font-weight: 600 !important;
    letter-spacing: .1px !important;
    text-transform: none !important;

    /* évite le gros “pavé” */
    margin: 0 !important;
  }

  /* 3) on sort la sidebar du flux pour supprimer le “gros rectangle blanc” */
  aside.sidebar,
  .sidebar{
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    background: transparent !important;
    box-shadow: none !important;
  }

  /* 4) panneau déroulant sous la barre (par défaut le thème anime .nav__items) */
  .nav__list .nav__items{
    position: fixed !important;
    top: calc(env(safe-area-inset-top, 0px) + var(--masthead-h)) !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 99998 !important;

    background: rgba(251,248,242,.98) !important;
    border-bottom: 1px solid rgba(0,0,0,.12) !important;
    box-shadow: 0 18px 40px rgba(0,0,0,.12) !important;

    padding: .8rem 1rem !important;
    max-height: 70vh !important;
    overflow: auto !important;
    -webkit-overflow-scrolling: touch;

    border-radius: 0 !important;
  }

  /* un peu de respiration */
  .nav__list a{
    padding: .45rem .25rem .45rem .65rem !important;
  }
}

/* =========================================================
   HARD FIX — iPhone: Toggle Menu visible + dans la barre
   Cible exacte: <nav class="nav__list"><label for="ac-toc">
   ========================================================= */

@media (max-width: 63.9375em){

  /* barre fixée */
  .masthead{
    position: fixed !important;
    top: 0 !important; left: 0 !important; right: 0 !important;
    z-index: 99999 !important;
  }
  body{
    padding-top: calc(env(safe-area-inset-top, 0px) + 56px) !important;
  }

  /* laisse de la place au bouton à droite */
  .greedy-nav a.site-title{
    padding-right: 120px !important;
  }

  /* LE bouton : on le force visible quoi qu’il arrive */
  nav.nav__list > label[for="ac-toc"]{
    display: inline-flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;

    position: fixed !important;
    top: calc(env(safe-area-inset-top, 0px) + 8px) !important;
    right: 10px !important;
    left: auto !important;

    z-index: 100000 !important;

    padding: .30rem .55rem !important;
    border-radius: 10px !important;
    border: 1px solid rgba(0,0,0,.14) !important;
    background: rgba(251,248,242,.90) !important;
    box-shadow: 0 6px 14px rgba(0,0,0,.10) !important;

    font-family: "JetBrains Mono", ui-monospace, Menlo, monospace !important;
    font-size: .82rem !important;
    font-weight: 600 !important;
    margin: 0 !important;
  }

  /* le conteneur sidebar ne doit pas créer une “deuxième barre” */
  aside.sidebar, .sidebar{
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* le panneau menu quand il s’ouvre */
  nav.nav__list > ul.nav__items{
    position: fixed !important;
    top: calc(env(safe-area-inset-top, 0px) + 56px) !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 99998 !important;

    background: rgba(251,248,242,.98) !important;
    border-bottom: 1px solid rgba(0,0,0,.12) !important;
    box-shadow: 0 18px 40px rgba(0,0,0,.12) !important;

    padding: .8rem 1rem !important;
    max-height: 70vh !important;
    overflow: auto !important;
    -webkit-overflow-scrolling: touch;
  }
}
